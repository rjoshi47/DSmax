Filter: https://practice.geeksforgeeks.org/tag-page.php?tag=Amazon&isCmp=1&level=1&problemType=0&sort=asc&sort_by=sub

3. https://practice.geeksforgeeks.org/problems/combination-sum/0
4. Distribute given sum among n beggers. (P&C)
5. https://practice.geeksforgeeks.org/problems/champagne-overflow/0
6. https://practice.geeksforgeeks.org/problems/next-permutation/0
8. https://practice.geeksforgeeks.org/problems/maximum-rectangular-area-in-a-histogram/0
'''
Created on 17-Jun-2018

@author: rjoshi
'''
res = []
for _ in range(int(input())):
    n = int(input())
    nums = list(map(int, input().strip().split(" ")))
    
    maxAreaSoFar = nums[0]
    (minTillNow, start, maxAreaTillNow) = (nums[0], 0, nums[0])
    for k in range(1, n):
        maxAreaTillNow = min(nums[k], minTillNow)*(k-start+1)
        if maxAreaTillNow >= maxAreaSoFar:
            if maxAreaTillNow > nums[k]:
                maxAreaSoFar = maxAreaTillNow
                minTillNow = min(nums[k], minTillNow)
            else:
                maxAreaSoFar = nums[k]
                minTillNow = nums[k]
                start = k
        else:
            (minTillNow, start) = (nums[k], k)
    res.append(maxAreaSoFar)
    
for xx in res:
    print(xx)
